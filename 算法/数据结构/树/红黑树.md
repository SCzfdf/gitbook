# 红黑树

[手写红黑树](https://cloud.tencent.com/developer/article/1739709)

红黑树是一种特化了的平衡二叉查找树(AVL树), 与AVL的核心区别是左右子树高度差可能大于1

有以下5个特性: 

1. 节点是红色或黑色

2. 根节点是黑色

3. 所有叶子都是黑色(叶子是NIL节点)

   > 网上的一些图都是省略了的

4. 每个红色节点的两个子结点都是黑色

   > 从每个叶子到根的所有路径上不能有两个连续的红色结点

5. 从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点

红黑树通过上述5个特性约束其不会退化成链表, 以及保证一定的平衡性



## 红黑树的变色与旋转

[红黑树的变色与旋转](https://zhuanlan.zhihu.com/p/102693409)

可以分为以下三种情况

* **不需要变色以及旋转**
  * 新插入的节点父节点是黑色
* **需要变色**
  * 新插入的节点是根节点, 根据规则2, 颜色变成黑色
  * 新插入的节点父节点是红色, 并且叔节点也是红色. 那么将父与叔节点标记为黑色, 祖节点为红色. **然后把祖节点当作新插入的节点递归重复这一判断**
* **需要变色以及旋转**
  * **新插入的节点父节点是红色, 并且叔节点是黑色. 需要做旋转**

> 和AVL树有一定区别, 区别在于旋转的时机(AVL: 高度绝对值大于1. 红黑树: 违反5个特性)
>
> 不过左旋和右旋是一致的. 


