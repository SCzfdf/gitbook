# B树

[一文详解：什么是B树？](https://zhuanlan.zhihu.com/p/59788528)

[面试官问你B树和B+树，就把这篇文章丢给他_图有部分画的有问题](https://segmentfault.com/a/1190000020416577)

​		

B树又叫平衡多路查找树, 一般用阶或者度来定义一颗B树

B树的定义有3个:

1. 一个节点可以存放多个元素
2. 一个父节点允许多个子节点
3. 节点之间和节点内部是有序的

​		

## 用阶来定义B树

一颗m阶的B树有以下特点

1. 树中每个结点最多含有m个孩子

2. 除根节点和子节点外, 每个节点最少有m/2个子节点(进一)

3. 根节点最少有2个子节点(数量够的情况)

4. 所有叶子节点在同一层

   > 根节点到每个叶子节点的长度都相同

5. 有m个叶子节点则对应有m-1个关键字

​		

下图为一颗3阶的B树

> 感觉阶和度是一个东西, 下图是用[网站](https://www.cs.usfca.edu/~galles/visualization/BTree.html)生成的, 网站对应显示的是Degree

![image-20220613173005614](B%E6%A0%91.assets/image-20220613173005614.png)

​		



## B树的插入

B树的插入很简单, 判断插入后是否还满足第5个特性(有超过m-1个关键字)

如果不满足则把中间关键字放到父节点中即可

如下图

![img](B%E6%A0%91.assets/1460000020416581.png)

![img](B%E6%A0%91.assets/1460000020416582.png)





## B树的删除

B树的删除比较复杂一些, 因为删除后可能会导致特性2, 4, 5被违反(根节点特殊处理)

1. 违反特性2 (节点最少有m/2个子节点)

   从父节点将一个元素下发到子节点

2. 违反特性5 (有m个叶子节点则对应有m-1个关键字)

   从被删除关键字的子节点中获取相近的关键字提升到该节点

> 感觉总觉得还有点少, 不过围绕着特性来就准没错


