# ES中的排序

ES中的排序

* 分值计算排序
* 列式存储的排序
* 数据的写入顺序



## 分值计算排序

分值排序: 全文检索默认基于分值排序. 而默认分值依据查询关键字与文本的关系

使用的分值算法有TF. IDF. BM25

![image-20220509185630272](%E6%8E%92%E5%BA%8F.assets/image-20220509185630272.png)



## 列式存储的排序

**doc_values**(为了解决随意数据的排序/聚合)

es默认储存2份数据. 原始数据一份, 列式储存一份.

原始数据用于检索, 列式存储用于聚合排序. doc_values禁用则意味着该列不能用于聚合排序操作.

text, annotated_text等大文本字段没有列式储存

![image-20220509190121361](%E6%8E%92%E5%BA%8F.assets/image-20220509190121361.png)



## 数据写入时默认排序

ES支持数据写入时的排序, 如日志文件按索引入库, 此时一个索引中的数据就是有序的

![image-20220509191117210](%E6%8E%92%E5%BA%8F.assets/image-20220509191117210.png)







