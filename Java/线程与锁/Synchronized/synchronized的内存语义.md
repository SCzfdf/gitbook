## synchronized



## synchronized的作用

通过对共享资源的互斥访问控制, 保证同一个时刻只能有一个线程执行临界区内的代码



---



## synchronized的内存语义

*   释放锁时:

    JMM将线程对应的工作内存中的共享变量刷新到共享内存中

*   获取锁时:

    JMM将线程对应的工作内存中的共享变量设置为无效, 使执行临界区的代码必须从共享内存中获取

  

​		

和volatile对比可以发现, volatile和synchronized有相同的内存语义

总结也是类似的, 这里再写一遍:

线程A释放了一个锁. 实际上是线程A向将要获取这个锁的某个线程发出了(线程A对共享变量的修改)消息

线程B获取锁. 实际上是线程B接受了之前某个线程发出的(之前线程A的修改)消息

<br/>

线程AB轮流获取释放锁实际上就是线程A通过共享内存向线程B发送消息


